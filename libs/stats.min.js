// @drecom/stats.js - http://github.com/drecom/stats.js
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){"use strict";var e=function(e,t){var n=e,r=1e3/n,a=1e3/n*.6,o=2*Math.round(window.devicePixelRatio||1),f=80*o,i=48*o,l=3*o,u=2*o,c=3*o,d=25*o,m=74*o,p=20*o,s=d/2,h="#002",v="#124",x=0,S=0,y=p,M=0,w=[];t||(t=[]),M=t.length;for(var g=0;g<M;g++)w.push(p);var R=document.createElement("div");R.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000";var C=document.createElement("canvas");C.width=f,C.height=i,R.appendChild(C),C.style.cssText="width:80px;height:48px";var F=C.getContext("2d");F.font="bold "+9*o+"px Helvetica,Arial,sans-serif",F.textBaseline="top",F.fillStyle=h,F.fillRect(0,0,f,i),F.fillStyle=v,F.fillRect(c,d,m,p);var z=function(e,t,n,r){F.fillStyle=e;var a=Math.round((1-n/t)*p);p-o<a?a=p-o:a<0&&(a=0);var f=Math.min(a,r),i=Math.max(a,r)-f;return i<o&&(i=o),F.fillRect(c+m-o,d+f,o,i),a};return{dom:R,getFps:function(){return x},getMs:function(){return S},addCustomGraph:function(e){t.push(e),w.push(p),M++},update:function(e,i,g,R){x=e,S=i,F.fillStyle=h,F.fillRect(0,0,f,d),F.fillStyle=a<=S?"#f08":"#0ff",F.fillText(Math.round(x)+" FPS  -  "+Math.round(S)+" MS",l,u),R&&(F.fillStyle="#fa0",F.fillText(R,l,s)),F.drawImage(C,c+o,d,m-o,p,c,d,m-o,p),F.fillStyle=v,F.fillRect(c+m-o,d,o,p),F.fillStyle="#a15";var H=Math.round((1-x/n)*p);if(H<0&&(H=0),F.fillRect(c+m-o,d+H,o,p-H),y=z("#0ff",r,S,y),M)for(var T=0;T<M;T++)w[T]=z(t[T].color,t[T].max,g[T],w[T])}}};return function(t){var n=t&&t.maxFPS?t.maxFPS:60,r=t&&t.maxMem?t.maxMem:100,a=t&&t.customGraphConf?t.customGraphConf:void 0,o=t&&t.drawInterval?t.drawInterval:1e3,f=!1,i=0,l=(performance||Date).now()+5e3,u=!1;self.performance&&self.performance.memory&&self.performance.memory.usedJSHeapSize&&(f=!0,i=self.performance.memory.usedJSHeapSize);var c=new e(n,a),d=(performance||Date).now(),m=d,p=0,s=0,h=0,v="";return{dom:c.dom,getFps:function(){return c.getFps()},getMs:function(){return c.getMs()},getMem:function(){return s},setText:function(e){v=e},begin:function(){d=(performance||Date).now()},end:function(e){p++;var t=(performance||Date).now(),n=t-d;if(h<n&&(h=n),t>=m+o){var a=v;f&&(i!==performance.memory.usedJSHeapSize?(f=!1,c.addCustomGraph({color:"#fa0",max:r}),u=!0):l<t&&(f=!1)),u&&(e||(e=[]),s=window.performance.memory.usedJSHeapSize/1048576,e.push(s),a=Math.round(s)+" MB  "+v),c.update(1e3*p/(t-m),h,e,a),m=t,p=0,h=0}return t},update:function(e){d=this.end(e)}}}});